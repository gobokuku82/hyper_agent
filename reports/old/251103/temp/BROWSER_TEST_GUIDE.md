# ProcessFlow í†µí•© ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## ğŸš€ ì„œë²„ ì‹¤í–‰ í™•ì¸

### Frontend
- **URL**: http://localhost:3000
- **ìƒíƒœ**: âœ… Running (Next.js 14.2.16)

### Backend
- **URL**: http://localhost:8000
- **ìƒíƒœ**: âœ… Running (FastAPI + Uvicorn)
- **API Docs**: http://localhost:8000/docs

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### Test 1: ê¸°ë³¸ ProcessFlow ë™ì‘ í™•ì¸

#### 1ë‹¨ê³„: í˜ì´ì§€ ì ‘ì†
1. ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:3000 ì—´ê¸°
2. ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ ë¡œë”© í™•ì¸
3. ì´ˆê¸° ë´‡ ë©”ì‹œì§€ í‘œì‹œ í™•ì¸: "ì•ˆë…•í•˜ì„¸ìš”! ë„ì™€ì¤˜ í™ˆì¦ˆëƒ¥ì¦ˆì…ë‹ˆë‹¤..."

#### 2ë‹¨ê³„: ì¿¼ë¦¬ ì „ì†¡ ë° ProcessFlow í‘œì‹œ í™•ì¸
1. **í…ŒìŠ¤íŠ¸ ì¿¼ë¦¬ ì…ë ¥**: "ê°•ë‚¨êµ¬ ì•„íŒŒíŠ¸ ì‹œì„¸ ì•Œë ¤ì¤˜"
2. **ì˜ˆìƒ ë™ì‘**:
   ```
   [User Message] ê°•ë‚¨êµ¬ ì•„íŒŒíŠ¸ ì‹œì„¸ ì•Œë ¤ì¤˜

   [ProcessFlow í‘œì‹œ]
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ğŸ¤– AI ì—ì´ì „íŠ¸                         â”‚
   â”‚ ê³„íš ì¤‘...                      0.0s   â”‚
   â”‚                                        â”‚
   â”‚ â—‹â”â”â—‹â”â”â—‹â”â”â—‹  (ì§„í–‰ ë‹¨ê³„ í‘œì‹œ)         â”‚
   â”‚ ê³„íš ê²€ìƒ‰ ë¶„ì„ ìƒì„±                    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   ```

3. **API ì‘ë‹µ ë„ì°© í›„**:
   - ProcessFlowê°€ ì‹¤ì œ ë°±ì—”ë“œ ë°ì´í„°ë¡œ ì—…ë°ì´íŠ¸ë˜ëŠ”ì§€ í™•ì¸
   - ì˜ˆìƒ: "ê²€ìƒ‰ (searching)" ë‹¨ê³„ê°€ "completed" ìƒíƒœë¡œ í‘œì‹œ
   - ì§„í–‰ë¥  100% í‘œì‹œ í™•ì¸

4. **ì™„ë£Œ í›„**:
   - ProcessFlow ë©”ì‹œì§€ ì œê±° í™•ì¸
   - ë´‡ ì‘ë‹µ ë©”ì‹œì§€ í‘œì‹œ í™•ì¸

#### 3ë‹¨ê³„: ê°œë°œì ë„êµ¬ë¡œ API ì‘ë‹µ í™•ì¸
1. F12 ë˜ëŠ” Ctrl+Shift+Ië¡œ ê°œë°œì ë„êµ¬ ì—´ê¸°
2. **Network íƒ­** ì´ë™
3. `/chat/message` POST ìš”ì²­ ì°¾ê¸°
4. **Response í™•ì¸**:
   ```json
   {
     "session_id": "...",
     "response": {
       "answer": "ê°•ë‚¨êµ¬ ì•„íŒŒíŠ¸ ì‹œì„¸ëŠ”..."
     },
     "process_flow": [  // â† ì´ í•„ë“œ í™•ì¸!
       {
         "step": "searching",
         "label": "ê²€ìƒ‰",
         "agent": "search_team",
         "status": "completed",
         "progress": 100
       }
     ],
     "execution_time_ms": 3000,
     ...
   }
   ```

5. **Console íƒ­** í™•ì¸:
   ```
   âœ… process_flow ë°ì´í„°ê°€ ìˆì–´ì•¼ í•¨
   âœ… "Generated process_flow with 1 steps" ë¡œê·¸ í™•ì¸
   ```

---

### Test 2: ì—¬ëŸ¬ íŒ€ ì‹¤í–‰ ì‹œë‚˜ë¦¬ì˜¤

#### í…ŒìŠ¤íŠ¸ ì¿¼ë¦¬ë“¤:
```
1. "ë¯¼ë²• ì œ2ì¡° ì¡°ë¬¸ ë‚´ìš© ì•Œë ¤ì¤˜"
   â†’ ì˜ˆìƒ: "ê²€ìƒ‰ (searching)" ë‹¨ê³„ë§Œ í‘œì‹œ

2. "ê³„ì•½ì„œ ê²€í† í•´ì¤˜" (ê³„ì•½ì„œ ì²¨ë¶€ í•„ìš”)
   â†’ ì˜ˆìƒ: "ë¶„ì„ (analyzing)" ë‹¨ê³„ í‘œì‹œ

3. "ì „ì„¸ì‚¬ê¸° ìœ„í—˜ë„ë¥¼ ë¶„ì„í•´ì¤˜"
   â†’ ì˜ˆìƒ: "ê²€ìƒ‰ â†’ ë¶„ì„" 2ë‹¨ê³„ í‘œì‹œ
```

#### ê° ì¿¼ë¦¬ë³„ í™•ì¸ ì‚¬í•­:
1. ProcessFlow ë‹¨ê³„ ê°œìˆ˜ê°€ ì‹¤ì œ ì‹¤í–‰ëœ íŒ€ ê°œìˆ˜ì™€ ì¼ì¹˜í•˜ëŠ”ê°€?
2. ê° ë‹¨ê³„ì˜ labelì´ ì˜¬ë°”ë¥´ê²Œ í•œê¸€ë¡œ í‘œì‹œë˜ëŠ”ê°€?
3. statusê°€ "completed"ë¡œ í‘œì‹œë˜ëŠ”ê°€?
4. progressê°€ 100ìœ¼ë¡œ í‘œì‹œë˜ëŠ”ê°€?

---

### Test 3: ì—ëŸ¬ ì²˜ë¦¬ í™•ì¸

#### ì‹œë‚˜ë¦¬ì˜¤: ë°±ì—”ë“œ ì¤‘ë‹¨
1. ë°±ì—”ë“œ ì„œë²„ ì¤‘ë‹¨ (Ctrl+C)
2. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì¿¼ë¦¬ ì „ì†¡
3. **ì˜ˆìƒ ë™ì‘**:
   - ProcessFlowì— ì—ëŸ¬ ìƒíƒœ í‘œì‹œ
   - ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
   - ProcessFlow ë©”ì‹œì§€ ì œê±°
   - "ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤" ë©”ì‹œì§€ í‘œì‹œ

---

## ğŸ” ìƒì„¸ í™•ì¸ í•­ëª©

### ProcessFlow ì»´í¬ë„ŒíŠ¸
- [ ] ProcessFlow ë©”ì‹œì§€ê°€ ì‚¬ìš©ì ë©”ì‹œì§€ ë‹¤ìŒì— í‘œì‹œë¨
- [ ] ë´‡ ì•„ì´ì½˜ê³¼ í•¨ê»˜ ì¹´ë“œ í˜•íƒœë¡œ í‘œì‹œë¨
- [ ] ê²½ê³¼ ì‹œê°„ì´ 0.0së¶€í„° ì¦ê°€í•¨
- [ ] ì§„í–‰ ë‹¨ê³„ê°€ ê°€ë¡œ ë°©í–¥ìœ¼ë¡œ í‘œì‹œë¨ (â—‹â”â”â—‹â”â”â—‹â”â”â—‹)

### ë™ì  ë‹¨ê³„ ë Œë”ë§
- [ ] `dynamicSteps`ê°€ ì „ë‹¬ë˜ë©´ ë°±ì—”ë“œ ë°ì´í„° ê¸°ë°˜ ë‹¨ê³„ í‘œì‹œ
- [ ] `dynamicSteps`ê°€ ì—†ìœ¼ë©´ ê¸°ì¡´ 4ë‹¨ê³„ fallback í‘œì‹œ
- [ ] ë‹¨ê³„ ê°œìˆ˜ê°€ ì‹¤í–‰ëœ íŒ€ì— ë”°ë¼ ë‹¤ë¦„ (1-4ê°œ)

### API ë°ì´í„° íë¦„
- [ ] `/chat/message` ì‘ë‹µì— `process_flow` í•„ë“œ í¬í•¨
- [ ] `process_flow` ë°°ì—´ì— ê° ë‹¨ê³„ ì •ë³´ í¬í•¨
- [ ] ê° ë‹¨ê³„ì— `step`, `label`, `agent`, `status`, `progress` í¬í•¨

### UI/UX
- [ ] í™œì„± ë‹¨ê³„: íŒŒë€ìƒ‰ + íšŒì „ ì• ë‹ˆë©”ì´ì…˜
- [ ] ì™„ë£Œ ë‹¨ê³„: ì´ˆë¡ìƒ‰ + ì²´í¬ ì•„ì´ì½˜
- [ ] ëŒ€ê¸° ë‹¨ê³„: íšŒìƒ‰ + ì›í˜• ì 
- [ ] ì—°ê²°ì„ ì´ ì™„ë£Œëœ ë‹¨ê³„ê¹Œì§€ ì´ˆë¡ìƒ‰ìœ¼ë¡œ ë³€ê²½

---

## ğŸ› ì˜ˆìƒ ê°€ëŠ¥í•œ ë¬¸ì œ

### ë¬¸ì œ 1: process_flowê°€ null
**ì¦ìƒ**: API ì‘ë‹µì— `process_flow: null`

**ì›ì¸**:
- `planning_state.execution_steps`ê°€ ë¹„ì–´ ìˆìŒ
- StepMapper ë³€í™˜ ì‹¤íŒ¨

**í™•ì¸ ë°©ë²•**:
```bash
# Backend ë¡œê·¸ í™•ì¸
tail -f backend/logs/app.log

# ë‹¤ìŒ ë¡œê·¸ ì°¾ê¸°:
"Generated process_flow with X steps"
```

**í•´ê²°**:
- `planning_node`ì—ì„œ `execution_steps` ìƒì„± í™•ì¸
- `converters.py`ì˜ try-except ë¡œê·¸ í™•ì¸

---

### ë¬¸ì œ 2: ProcessFlowê°€ ì •ì  ë‹¨ê³„ë§Œ í‘œì‹œ
**ì¦ìƒ**: í•­ìƒ "ê³„íš â†’ ê²€ìƒ‰ â†’ ë¶„ì„ â†’ ìƒì„±" 4ë‹¨ê³„ í‘œì‹œ

**ì›ì¸**:
- `message.processFlowSteps`ê°€ undefined
- API ì‘ë‹µì— `process_flow` ì—†ìŒ
- ChatInterfaceê°€ ë°ì´í„° ì „ë‹¬í•˜ì§€ ì•ŠìŒ

**í™•ì¸ ë°©ë²•**:
```javascript
// ë¸Œë¼ìš°ì € Consoleì—ì„œ í™•ì¸
console.log(messages.find(m => m.type === 'process-flow'))

// processFlowSteps í•„ë“œ í™•ì¸
```

**í•´ê²°**:
- ChatInterfaceì˜ `handleSendMessage`ì—ì„œ `response.process_flow` ì²˜ë¦¬ í™•ì¸
- `setMessages` ì—…ë°ì´íŠ¸ ë¡œì§ í™•ì¸

---

### ë¬¸ì œ 3: TypeScript ì—ëŸ¬
**ì¦ìƒ**: ë¸Œë¼ìš°ì € Consoleì— TypeScript íƒ€ì… ì—ëŸ¬

**ì›ì¸**:
- `ProcessFlowStep` ì¸í„°í˜ì´ìŠ¤ import ëˆ„ë½
- `Message.processFlowSteps` íƒ€ì… ë¶ˆì¼ì¹˜

**í•´ê²°**:
```typescript
// types/chat.ts í™•ì¸
export interface ProcessFlowStep { ... }

// chat-interface.tsx í™•ì¸
import type { ProcessFlowStep } from "@/types/chat"
```

---

### ë¬¸ì œ 4: CORS ì—ëŸ¬
**ì¦ìƒ**: Network íƒ­ì—ì„œ CORS ì—ëŸ¬

**ì›ì¸**:
- Backend CORS ì„¤ì • ë¬¸ì œ

**í•´ê²°**:
```python
# backend/app/main.py í™•ì¸
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:3000"],  # Frontend URL
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

---

## âœ… ì„±ê³µ ê¸°ì¤€

ë‹¤ìŒ í•­ëª©ì´ ëª¨ë‘ ì¶©ì¡±ë˜ë©´ í…ŒìŠ¤íŠ¸ ì„±ê³µ:

1. **API ì‘ë‹µ**
   - [x] `process_flow` í•„ë“œ ì¡´ì¬
   - [x] 1ê°œ ì´ìƒì˜ step í¬í•¨
   - [x] ê° stepì´ `step`, `label`, `agent`, `status`, `progress` í¬í•¨

2. **UI í‘œì‹œ**
   - [ ] ProcessFlow ì»´í¬ë„ŒíŠ¸ê°€ ì¿¼ë¦¬ ì „ì†¡ ì‹œ í‘œì‹œë¨
   - [ ] ë°±ì—”ë“œ ë°ì´í„° ê¸°ë°˜ ë™ì  ë‹¨ê³„ ë Œë”ë§
   - [ ] ì‹¤í–‰ëœ íŒ€ì— ë”°ë¼ ë‹¨ê³„ ê°œìˆ˜ ë³€í™”
   - [ ] ì™„ë£Œ í›„ ProcessFlow ì œê±°, ë‹µë³€ í‘œì‹œ

3. **ì—ëŸ¬ ì²˜ë¦¬**
   - [ ] ì—ëŸ¬ ë°œìƒ ì‹œ ì ì ˆí•œ UI í‘œì‹œ
   - [ ] ProcessFlow ì—ëŸ¬ ìƒíƒœ í‘œì‹œ
   - [ ] ë³µêµ¬ ê°€ëŠ¥ (ìƒˆ ì¿¼ë¦¬ ì „ì†¡ ì‹œ ì •ìƒ ì‘ë™)

---

## ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· ì²´í¬ë¦¬ìŠ¤íŠ¸

í…ŒìŠ¤íŠ¸ ì™„ë£Œ í›„ ë‹¤ìŒ ìƒíƒœ ìº¡ì²˜:

1. **ProcessFlow í‘œì‹œ ì¤‘**
   - ì¿¼ë¦¬ ì „ì†¡ ì§í›„
   - ì§„í–‰ ë‹¨ê³„ ì• ë‹ˆë©”ì´ì…˜

2. **API ì‘ë‹µ í™•ì¸**
   - Network íƒ­ì—ì„œ `/chat/message` Response
   - `process_flow` í•„ë“œ ë‚´ìš©

3. **ì™„ë£Œ í›„ UI**
   - ProcessFlow ì œê±°ë¨
   - ë´‡ ì‘ë‹µ í‘œì‹œë¨

4. **ì—¬ëŸ¬ íŒ€ ì‹¤í–‰ ì‹œ**
   - 1íŒ€ ì‹¤í–‰ (1ë‹¨ê³„ë§Œ)
   - 2íŒ€ ì‹¤í–‰ (2ë‹¨ê³„)

---

## ğŸš€ í…ŒìŠ¤íŠ¸ í›„ ë‹¤ìŒ ë‹¨ê³„

### ì„±ê³µ ì‹œ
1. âœ… Part 1-2 ì™„ë£Œ í™•ì¸
2. ğŸ“ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¬¸ì„œí™”
3. ğŸ‰ ë°°í¬ ì¤€ë¹„

### ì‹¤íŒ¨ ì‹œ
1. ğŸ› ë¬¸ì œ ì‹ë³„ (ìœ„ "ì˜ˆìƒ ê°€ëŠ¥í•œ ë¬¸ì œ" ì°¸ì¡°)
2. ğŸ”§ ë””ë²„ê¹… ë° ìˆ˜ì •
3. ğŸ”„ ì¬í…ŒìŠ¤íŠ¸

---

## ğŸ“ ë„ì›€ë§

### ì„œë²„ ì¬ì‹œì‘
```bash
# ë°±ì—”ë“œ ì¬ì‹œì‘
cd backend
../venv/Scripts/python -m uvicorn app.main:app --reload

# í”„ë¡ íŠ¸ì—”ë“œ ì¬ì‹œì‘
cd frontend
npm run dev
```

### ë¡œê·¸ í™•ì¸
```bash
# ë°±ì—”ë“œ ë¡œê·¸
tail -f backend/logs/app.log

# í”„ë¡ íŠ¸ì—”ë“œ Console
ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ (F12) â†’ Console íƒ­
```

### API ì§ì ‘ í…ŒìŠ¤íŠ¸
```bash
# Swagger UI
http://localhost:8000/docs

# cURL
curl -X POST "http://localhost:8000/chat/message" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "ê°•ë‚¨êµ¬ ì•„íŒŒíŠ¸ ì‹œì„¸",
    "session_id": "test-session"
  }'
```

---

**ì‘ì„±ì¼**: 2025-10-08
**í…ŒìŠ¤íŠ¸ ëŒ€ìƒ**: TODO + ProcessFlow Integration (Part 1-2)
**ë¬¸ì„œ ë²„ì „**: 1.0
